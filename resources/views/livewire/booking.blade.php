<div>

    <div class="selectmode">
        <h4 class="sbheading">Select Mode of Session</h4>
        <ul class="nav nav-pills" role="tablist">
            <li class="nav-item select_mode" data-value="in-person">
                <a class="nav-link" data-bs-toggle="pill">
                    <div class="icon">
                        <svg id="Group_50661" data-name="Group 50661" xmlns="http://www.w3.org/2000/svg" width="25"
                            height="30" viewBox="0 0 25.203 30.209">
                            <path id="Path_132459" data-name="Path 132459"
                                d="M94.307,14.552a7.04,7.04,0,0,0,5.145-2.132,7.041,7.041,0,0,0,2.131-5.144,7.041,7.041,0,0,0-2.132-5.144,7.274,7.274,0,0,0-10.289,0,7.04,7.04,0,0,0-2.132,5.144,7.041,7.041,0,0,0,2.132,5.145A7.043,7.043,0,0,0,94.307,14.552ZM90.415,3.383a5.5,5.5,0,0,1,7.785,0,5.26,5.26,0,0,1,1.613,3.892A5.26,5.26,0,0,1,98.2,11.168a5.5,5.5,0,0,1-7.785,0A5.259,5.259,0,0,1,88.8,7.276,5.26,5.26,0,0,1,90.415,3.383Zm0,0"
                                transform="translate(-81.896)" fill="#1c3495" />
                            <path id="Path_132460" data-name="Path 132460"
                                d="M25.142,255.953a17.971,17.971,0,0,0-.245-1.909,15.039,15.039,0,0,0-.469-1.919,9.48,9.48,0,0,0-.789-1.79,6.747,6.747,0,0,0-1.189-1.55,5.245,5.245,0,0,0-1.709-1.074,5.906,5.906,0,0,0-2.182-.395,2.214,2.214,0,0,0-1.183.5c-.354.231-.769.5-1.232.794a7.058,7.058,0,0,1-1.594.7,6.189,6.189,0,0,1-3.9,0,7.037,7.037,0,0,1-1.593-.7c-.458-.293-.873-.56-1.233-.795a2.212,2.212,0,0,0-1.182-.5,5.9,5.9,0,0,0-2.181.4,5.241,5.241,0,0,0-1.709,1.074,6.748,6.748,0,0,0-1.189,1.55,9.5,9.5,0,0,0-.789,1.79,15.075,15.075,0,0,0-.469,1.919,17.849,17.849,0,0,0-.245,1.909c-.04.577-.06,1.177-.06,1.784a5.016,5.016,0,0,0,1.49,3.795,5.362,5.362,0,0,0,3.839,1.4H19.874a5.363,5.363,0,0,0,3.839-1.4,5.014,5.014,0,0,0,1.49-3.8C25.2,257.129,25.182,256.529,25.142,255.953Zm-2.65,4.3a3.611,3.611,0,0,1-2.618.912H5.329a3.611,3.611,0,0,1-2.618-.912,3.276,3.276,0,0,1-.94-2.513c0-.566.019-1.125.056-1.661a16.1,16.1,0,0,1,.221-1.719,13.3,13.3,0,0,1,.413-1.692A7.732,7.732,0,0,1,3.1,251.21a5,5,0,0,1,.874-1.146,3.479,3.479,0,0,1,1.137-.707,4.073,4.073,0,0,1,1.394-.269c.062.033.172.1.351.212.364.237.783.508,1.247.8a8.77,8.77,0,0,0,2,.894,7.958,7.958,0,0,0,4.988,0,8.781,8.781,0,0,0,2-.895c.475-.3.882-.566,1.246-.8.179-.116.289-.18.351-.212a4.076,4.076,0,0,1,1.395.269,3.484,3.484,0,0,1,1.137.707,4.988,4.988,0,0,1,.874,1.146,7.706,7.706,0,0,1,.642,1.455,13.264,13.264,0,0,1,.413,1.692,16.234,16.234,0,0,1,.221,1.72h0c.038.534.056,1.093.057,1.661A3.275,3.275,0,0,1,22.493,260.25Zm0,0"
                                transform="translate(0 -232.724)" fill="#1c3495" />
                        </svg>
                    </div>
                    In Person
                </a>
            </li>
            <li class="nav-item select_mode" data-value="video-call">
                <a class="nav-link active" data-bs-toggle="pill">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="21"
                            viewBox="0 0 30.268 21.862">
                            <path id="video"
                                d="M30.3,7.013a2.093,2.093,0,0,0-2.232.255l-3.6,2.883V9.533A4.758,4.758,0,0,0,19.19,4.259H6.533A4.758,4.758,0,0,0,1.259,9.533V20.784a4.758,4.758,0,0,0,5.274,5.274H19.19a4.758,4.758,0,0,0,5.274-5.274v-.617l3.6,2.883a2.09,2.09,0,0,0,1.314.464,2.131,2.131,0,0,0,.918-.21,2.1,2.1,0,0,0,1.2-1.9V8.916a2.1,2.1,0,0,0-1.2-1.9ZM22.355,20.784c0,2.218-.946,3.164-3.164,3.164H6.533c-2.218,0-3.164-.946-3.164-3.164V9.533c0-2.218.946-3.164,3.164-3.164H19.19c2.218,0,3.164.946,3.164,3.164Zm7.032.619-4.922-3.938V12.852l4.922-3.938Z"
                                transform="translate(-1.227 -4.227)" fill="#6bbf9e" />
                        </svg>
                    </div>
                    Video Call
                </a>
            </li>
            <li class="nav-item select_mode" data-value="phone-call">
                <a class="nav-link" data-bs-toggle="pill">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                            viewBox="0 0 30.165 30.209">
                            <g id="Group_50663" data-name="Group 50663" transform="translate(-0.344 0)">
                                <g id="Group_50662" data-name="Group 50662" transform="translate(0.344 0)">
                                    <path id="Path_132461" data-name="Path 132461"
                                        d="M24.2,44.372a2.971,2.971,0,0,0-2.155-.988,3.072,3.072,0,0,0-2.18.982l-2.015,2.008c-.166-.089-.332-.172-.491-.255-.23-.115-.446-.223-.631-.338A21.9,21.9,0,0,1,11.477,41a12.919,12.919,0,0,1-1.721-2.716c.523-.478,1.007-.975,1.479-1.454.179-.179.357-.363.536-.542a2.925,2.925,0,0,0,0-4.412L10.03,30.135c-.2-.2-.4-.4-.593-.606-.383-.4-.784-.8-1.2-1.186A3.018,3.018,0,0,0,6.1,27.406a3.123,3.123,0,0,0-2.168.937l-.013.013L1.754,30.543A4.665,4.665,0,0,0,.371,33.508a11.177,11.177,0,0,0,.816,4.731,27.452,27.452,0,0,0,4.877,8.135A30,30,0,0,0,16.055,54.2a15.566,15.566,0,0,0,5.611,1.658c.134.006.274.013.4.013a4.8,4.8,0,0,0,3.679-1.581c.006-.013.019-.019.026-.032A14.494,14.494,0,0,1,26.887,53.1c.274-.261.555-.536.829-.822a3.181,3.181,0,0,0,.963-2.206,3.064,3.064,0,0,0-.982-2.187Zm2.283,6.714c-.006,0-.006.006,0,0-.249.268-.5.51-.778.778a16.765,16.765,0,0,0-1.231,1.275,3.074,3.074,0,0,1-2.4,1.014c-.1,0-.2,0-.293-.006a13.828,13.828,0,0,1-4.973-1.492A28.321,28.321,0,0,1,7.4,45.284a25.884,25.884,0,0,1-4.591-7.644,9.1,9.1,0,0,1-.714-3.991,2.927,2.927,0,0,1,.88-1.894L5.146,29.58a1.449,1.449,0,0,1,.969-.453,1.364,1.364,0,0,1,.931.446l.019.019c.389.363.759.74,1.148,1.141.2.2.4.408.606.618l1.741,1.741a1.217,1.217,0,0,1,0,1.976c-.185.185-.363.37-.548.548-.536.548-1.046,1.058-1.6,1.556-.013.013-.026.019-.032.032a1.3,1.3,0,0,0-.332,1.447l.019.057a13.974,13.974,0,0,0,2.059,3.36l.006.006a23.4,23.4,0,0,0,5.662,5.152,8.706,8.706,0,0,0,.784.427c.23.115.446.223.631.338.026.013.051.032.077.045a1.382,1.382,0,0,0,.631.159,1.363,1.363,0,0,0,.969-.44l2.18-2.18a1.442,1.442,0,0,1,.963-.478,1.3,1.3,0,0,1,.918.465l.013.013,3.513,3.513A1.261,1.261,0,0,1,26.479,51.085Z"
                                        transform="translate(-0.344 -25.659)" fill="#1c3495" />
                                    <path id="Path_132462" data-name="Path 132462"
                                        d="M245.652,87.633a8.205,8.205,0,0,1,6.682,6.682.855.855,0,0,0,.848.714,1.139,1.139,0,0,0,.147-.013.862.862,0,0,0,.708-.995,9.922,9.922,0,0,0-8.084-8.084.865.865,0,0,0-.995.7A.851.851,0,0,0,245.652,87.633Z"
                                        transform="translate(-229.349 -80.447)" fill="#1c3495" />
                                    <path id="Path_132463" data-name="Path 132463"
                                        d="M263.088,13.326A16.338,16.338,0,0,0,249.775.013a.859.859,0,1,0-.281,1.7,14.593,14.593,0,0,1,11.9,11.9.855.855,0,0,0,.848.714,1.139,1.139,0,0,0,.147-.013A.845.845,0,0,0,263.088,13.326Z"
                                        transform="translate(-232.936 0)" fill="#1c3495" />
                                </g>
                            </g>
                        </svg>
                    </div>
                    Phone Call
                </a>
            </li>
        </ul>
    </div>

    <div class="selectdate">
        <div class="fullrow">
            <h4 class="sbheading">Select Date and Time</h4>
            <div class="calendar_icon" wire:ignore>
                <input type="text" class="input datepicker" value="" />
                <svg id="Group_50666" data-name="Group 50666" xmlns="http://www.w3.org/2000/svg" width="11"
                    height="12" viewBox="0 0 11.054 12.188">
                    <path id="Path_132467" data-name="Path 132467"
                        d="M7.675,3.8a.428.428,0,0,1-.425-.425v-1.7a.425.425,0,0,1,.85,0v1.7A.428.428,0,0,1,7.675,3.8Z"
                        transform="translate(-4.416 -1.25)" fill="#fff" />
                    <path id="Path_132468" data-name="Path 132468"
                        d="M15.675,3.8a.428.428,0,0,1-.425-.425v-1.7a.425.425,0,1,1,.85,0v1.7A.428.428,0,0,1,15.675,3.8Z"
                        transform="translate(-7.881 -1.25)" fill="#fff" />
                    <path id="Path_132469" data-name="Path 132469"
                        d="M8.067,13.636a.564.564,0,0,1-.215-.045.544.544,0,0,1-.351-.522.564.564,0,0,1,.045-.215.655.655,0,0,1,.119-.187.585.585,0,0,1,.187-.119.579.579,0,0,1,.618.119.6.6,0,0,1,.164.4.852.852,0,0,1-.011.113.36.36,0,0,1-.034.1.429.429,0,0,1-.051.1.893.893,0,0,1-.068.085.6.6,0,0,1-.4.164Z"
                        transform="translate(-4.524 -6.125)" fill="#fff" />
                    <path id="Path_132470" data-name="Path 132470"
                        d="M11.567,13.634a.564.564,0,0,1-.215-.045A.544.544,0,0,1,11,13.067a.564.564,0,0,1,.045-.215.655.655,0,0,1,.119-.187.585.585,0,0,1,.187-.119.568.568,0,0,1,.618.119.6.6,0,0,1,.164.4.852.852,0,0,1-.011.113.36.36,0,0,1-.034.1.429.429,0,0,1-.051.1.893.893,0,0,1-.068.085A.6.6,0,0,1,11.567,13.634Z"
                        transform="translate(-6.04 -6.123)" fill="#fff" />
                    <path id="Path_132471" data-name="Path 132471"
                        d="M15.067,13.634a.564.564,0,0,1-.215-.045.585.585,0,0,1-.187-.119l-.068-.085a.429.429,0,0,1-.051-.1.36.36,0,0,1-.034-.1.852.852,0,0,1-.011-.113.6.6,0,0,1,.164-.4.585.585,0,0,1,.187-.119.566.566,0,0,1,.618.119.6.6,0,0,1,.164.4.852.852,0,0,1-.011.113.36.36,0,0,1-.034.1.429.429,0,0,1-.051.1.893.893,0,0,1-.068.085.6.6,0,0,1-.4.164Z"
                        transform="translate(-7.556 -6.123)" fill="#fff" />
                    <path id="Path_132472" data-name="Path 132472"
                        d="M8.067,17.139a.564.564,0,0,1-.215-.045.655.655,0,0,1-.187-.119.6.6,0,0,1-.164-.4.564.564,0,0,1,.045-.215.529.529,0,0,1,.119-.187.569.569,0,1,1,.4.969Z"
                        transform="translate(-4.524 -7.644)" fill="#fff" />
                    <path id="Path_132473" data-name="Path 132473"
                        d="M11.567,17.139A.561.561,0,0,1,11,16.572a.564.564,0,0,1,.045-.215.529.529,0,0,1,.119-.187.594.594,0,0,1,.8,0,.529.529,0,0,1,.119.187.564.564,0,0,1,.045.215.561.561,0,0,1-.567.567Z"
                        transform="translate(-6.04 -7.644)" fill="#fff" />
                    <path id="Path_132474" data-name="Path 132474"
                        d="M15.067,17.133a.6.6,0,0,1-.4-.164.529.529,0,0,1-.119-.187.534.534,0,0,1,0-.431.529.529,0,0,1,.119-.187.566.566,0,0,1,.51-.153.342.342,0,0,1,.108.034.429.429,0,0,1,.1.051.893.893,0,0,1,.085.068.567.567,0,0,1-.4.969Z"
                        transform="translate(-7.556 -7.638)" fill="#fff" />
                    <path id="Path_132475" data-name="Path 132475"
                        d="M12.812,9.19H3.175a.425.425,0,1,1,0-.85h9.637a.425.425,0,1,1,0,.85Z"
                        transform="translate(-2.467 -4.321)" fill="#fff" />
                    <path id="Path_132476" data-name="Path 132476"
                        d="M10.044,14.087H5.509A2.969,2.969,0,0,1,2.25,10.828V6.009A2.969,2.969,0,0,1,5.509,2.75h4.535A2.969,2.969,0,0,1,13.3,6.009v4.818A2.969,2.969,0,0,1,10.044,14.087ZM5.509,3.6A2.118,2.118,0,0,0,3.1,6.009v4.818a2.118,2.118,0,0,0,2.409,2.409h4.535a2.118,2.118,0,0,0,2.409-2.409V6.009A2.118,2.118,0,0,0,10.044,3.6Z"
                        transform="translate(-2.25 -1.9)" fill="#fff" />
                </svg>
            </div>
        </div>
        @php
            $formatted_date = \Carbon\Carbon::parse($selected_date);

            $year = $formatted_date->format('Y');
            $month = $formatted_date->format('m');
            $date = $formatted_date->format('d');

            $dates = generateMonthDates($year, $month); // For July 2025
        @endphp

        <div class="owl-carousel date_carousel" wire:ignore>
            @foreach ($dates as $day)
                <div class="item @if ($day['full'] == $year . '-' . $month . '-' . $date) active @endif"
                    wire:click="selectDate('{{ $day['full'] }}')">
                    <strong>{{ $day['date'] }}</strong>
                    <span>{{ $day['day'] }}</span>
                </div>
            @endforeach
        </div>

        <div class="selected_date">
            Date Selected : <span id="formattedDate">
                {{ $formatted_date->format('l, d M Y') }}
            </span>
        </div>

        @php
            $availableSlots = generateTimeSlotsByDuration($year, $month, $date, $slot_duration, $booked_time_slots);
        @endphp

        @if ($availableSlots)
            <div class="selecttime">
                @foreach ($availableSlots as $slot)
                    <div class="cbox timeslot_box @if ($selected_time_slot == $slot) active @endif"
                        data-value="{{ $slot }}" wire:click="selectTimeSlot('{{ $slot }}')">
                        {{ $slot }}</div>
                @endforeach
            </div>
        @else
            <span class="no_slots">
                Uh Oh! No Time Slots Available for this Date!
            </span>
        @endif
    </div>

    <div class="bill_details">
        <h4 class="sbheading">Billing Details</h4>
        <form id="billing_details_form">

            @csrf

            <input type="hidden" name="selected_date" value="{{ $selected_date }}">
            <input type="hidden" name="selected_slot" value="{{ $selected_time_slot }}">
            <input type="hidden" name="therapy_type" value="{{ $plan_details->hashed_id }}">
            <input type="hidden" name="therapy_mode" value="video-call">

            <div class="row" wire:ignore>
                <div class="col-md-12 common_col">
                    <!-- add error class for error -->
                    <div class="new_inputlabel label_inside">
                        <div class="label">
                            <div class="relative">
                                Full Name
                                <span class="star">*</span>
                            </div>
                        </div>
                        <input type="text" class="input" placeholder="Enter Full Name" name="full_name" />
                    </div>
                    <span class="error_msg d-none">
                    </span>
                </div>
                <div class="col-md-12 common_col">
                    <div class="new_inputlabel label_inside">
                        <div class="label">
                            <div class="relative">
                                Email Address
                                <span class="star">*</span>
                            </div>
                        </div>
                        <input type="email" class="input" placeholder="Enter Email Address" name="email" />
                    </div>
                    <span class="error_msg d-none">
                    </span>
                </div>
                <div class="col-md-12 common_col">
                    <div class="new_inputlabel label_inside">
                        <div class="label">
                            <div class="relative">
                                Address Line 1
                                <span class="star">*</span>
                            </div>
                        </div>
                        <input type="text" class="input" placeholder="Enter Address" name="address_line_1" />
                    </div>
                    <span class="error_msg d-none"></span>
                </div>
                <div class="col-md-12 common_col">
                    <div class="new_inputlabel label_inside">
                        <div class="label">
                            <div class="relative">
                                Address Line 2
                                <!-- <span class="star">*</span> -->
                            </div>
                        </div>
                        <input type="text" class="input" placeholder="Enter Address" name="address_line_2" />
                    </div>
                    <span class="error_msg d-none">
                    </span>
                </div>
                <div class="col-md-12 common_col">
                    <div class="new_inputlabel label_inside">
                        <div class="label">
                            <div class="relative">
                                Landmark
                                <!-- <span class="star">*</span> -->
                            </div>
                        </div>
                        <input type="text" class="input" placeholder="Enter Landmark" name="lank_mark" />
                    </div>
                    <span class="error_msg d-none">
                    </span>
                </div>

                <div class="col-md-6 common_col">
                    <div class="new_inputlabel label_inside">
                        <div class="label">
                            <div class="relative">
                                Country
                                <span class="star">*</span>
                            </div>
                        </div>
                        <div class="ui search selection dropdown dropdownmenu input_none" id="country_dd">
                            <input type="hidden" name="country" value="{{ $current_country->id }}">
                            <div class="text default">
                                Select Country
                            </div>
                            <div class="menu with_searchbox">
                                <div class="selectsearch_wrap">
                                    <div class="search_area">
                                        <input type="text" placeholder="Search"
                                            class="input graytext filter-input" />
                                    </div>
                                </div>
                                <div class="select_scrollarea filterfrom customscroll">
                                    @foreach ($countries as $country)
                                        <div class="item" data-value="{{ $country->id }}">
                                            {{ $country->name }}
                                        </div>
                                    @endforeach
                                </div>
                            </div>
                        </div>
                    </div>
                    <span class="error_msg d-none"></span>
                </div>

                <div class="col-md-6 common_col">
                    <div class="new_inputlabel label_inside">
                        <div class="label">
                            <div class="relative">
                                State
                                <span class="star">*</span>
                            </div>
                        </div>
                        <div class="ui search selection dropdown dropdownmenu input_none" id="state_dd">
                            <input type="hidden" name="state">
                            <div class="text default">
                                Select State
                            </div>
                            <div class="menu with_searchbox">
                                <div class="selectsearch_wrap">
                                    <div class="search_area">
                                        <input type="text" placeholder="Search"
                                            class="input graytext filter-input" />
                                    </div>
                                </div>
                                <div class="select_scrollarea filterfrom customscroll">
                                </div>
                            </div>
                        </div>
                    </div>
                    <span class="error_msg d-none"></span>
                </div>

                <div class="col-md-6 common_col">
                    <div class="new_inputlabel label_inside">
                        <div class="label">
                            <div class="relative">
                                City
                                <span class="star">*</span>
                            </div>
                        </div>
                        <input type="text" class="input" placeholder="Enter City" name="city" />
                    </div>
                    <span class="error_msg d-none"></span>
                </div>

                <div class="col-md-6 common_col">
                    <div class="new_inputlabel label_inside">
                        <div class="label">
                            <div class="relative">
                                Zip Code
                                <span class="star">*</span>
                            </div>
                        </div>
                        <input type="number" class="input" placeholder="Enter Zip Code" name="zip_code" />
                    </div>
                    <span class="error_msg d-none"></span>
                </div>

                <div class="col-md-6 common_col">
                    <div class="two_column">
                        <div class="td1">
                            <div class="new_inputlabel label_inside">
                                <div class="label">
                                    <div class="relative">
                                        Select
                                    </div>
                                </div>
                                <div class="ui search selection dropdown dropdownmenu input_none with_icon">
                                    <input type="hidden" name="phone_code"
                                        value="{{ $current_country->dial_code }}">
                                    <div class="text default"></div>
                                    <div class="menu with_searchbox mw_180">
                                        <div class="selectsearch_wrap">
                                            <div class="search_area">
                                                <input type="text" placeholder="Search"
                                                    class="input graytext filter-input" />
                                            </div>
                                        </div>
                                        <div class="select_scrollarea filterfrom customscroll">
                                            @foreach ($countries as $country)
                                                <div class="item" data-value="{{ $country->dial_code }}">
                                                    <i class="{{ strtolower($country->code) }} flag"></i>
                                                    {{ $country->dial_code }}
                                                </div>
                                            @endforeach
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="td2">
                            <div class="new_inputlabel label_inside">
                                <div class="label">
                                    <div class="relative">
                                        Phone #
                                        <span class="star">*</span>
                                    </div>
                                </div>
                                <input type="number" class="input" placeholder="Enter Phone #"
                                    name="phone_number" />
                            </div>
                        </div>
                    </div>
                    <span class="error_msg d-none"></span>
                </div>
                <div class="col-md-12 common_col">
                    <!-- add error class for error -->
                    <div class="new_inputlabel label_inside">
                        <div class="label">
                            <div class="relative">
                                Short Brief
                                <span class="star">*</span>
                            </div>
                        </div>
                        <textarea class="textarea text_autoheight" placeholder="Describe in a short brief, what you’re looking for…"
                            name="brief"></textarea>
                    </div>
                    <span class="error_msg d-none"></span>
                </div>
            </div>
        </form>
    </div>
</div>

@push('scripts')
    <script>
        $("#preview_date").text("{{ $formatted_date->format('l, d M Y') }}");

        $('.select_mode').on('click', function() {
            $('input[name="therapy_mode"]').val($(this).data('value'));
        });
    </script>
@endpush
